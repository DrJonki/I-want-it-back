<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>thor::ResourceCache&lt; R &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="Doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="thor.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>thor</b></li><li class="navelem"><a class="el" href="classthor_1_1_resource_cache.html">ResourceCache</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classthor_1_1_resource_cache-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">thor::ResourceCache&lt; R &gt; Class Template Reference<div class="ingroups"><a class="el" href="group___resources.html">Resources</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class that is responsible for the management of resources like images, fonts or music.  
 <a href="classthor_1_1_resource_cache.html#details">More...</a></p>

<p>Inherits NonCopyable.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2610f7c69982fedd40916c765626f663"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_resource_cache.html#a2610f7c69982fedd40916c765626f663">ResourceCache</a> ()</td></tr>
<tr class="memdesc:a2610f7c69982fedd40916c765626f663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a2610f7c69982fedd40916c765626f663">More...</a><br/></td></tr>
<tr class="separator:a2610f7c69982fedd40916c765626f663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3156d9bad6b6da89913dface05c4978c"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; R &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_resource_cache.html#a3156d9bad6b6da89913dface05c4978c">search</a> (const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;key)</td></tr>
<tr class="memdesc:a3156d9bad6b6da89913dface05c4978c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for an occurrence of <em>key</em> and returns the mapped resource, if possible.  <a href="#a3156d9bad6b6da89913dface05c4978c">More...</a><br/></td></tr>
<tr class="separator:a3156d9bad6b6da89913dface05c4978c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6c75a551dcc3b8e16ae2f7e2bbdaf2"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; const R &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_resource_cache.html#a8b6c75a551dcc3b8e16ae2f7e2bbdaf2">search</a> (const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;key) const </td></tr>
<tr class="memdesc:a8b6c75a551dcc3b8e16ae2f7e2bbdaf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for an occurrence of <em>key</em> and returns the mapped resource, if possible (const overload).  <a href="#a8b6c75a551dcc3b8e16ae2f7e2bbdaf2">More...</a><br/></td></tr>
<tr class="separator:a8b6c75a551dcc3b8e16ae2f7e2bbdaf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd443e722dde82b957a279408e94083"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; R &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_resource_cache.html#a5bd443e722dde82b957a279408e94083">acquire</a> (const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;key)</td></tr>
<tr class="memdesc:a5bd443e722dde82b957a279408e94083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the resource mapped to <em>key</em>, loading the resource if required.  <a href="#a5bd443e722dde82b957a279408e94083">More...</a><br/></td></tr>
<tr class="separator:a5bd443e722dde82b957a279408e94083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289c4037a21ddc5c3f34b47598f9b503"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_resource_cache.html#a289c4037a21ddc5c3f34b47598f9b503">release</a> (const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;key)</td></tr>
<tr class="memdesc:a289c4037a21ddc5c3f34b47598f9b503"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the resource as soon as possible.  <a href="#a289c4037a21ddc5c3f34b47598f9b503">More...</a><br/></td></tr>
<tr class="separator:a289c4037a21ddc5c3f34b47598f9b503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73520c6f013b0be7c69733d8a3aac1d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_resource_cache.html#a73520c6f013b0be7c69733d8a3aac1d3">setLoadingFailureStrategy</a> (<a class="el" href="namespacethor_1_1_resources.html#acb865b349dcabe48aca3d79865f60ceb">Resources::LoadingFailureStrategy</a> strategy)</td></tr>
<tr class="memdesc:a73520c6f013b0be7c69733d8a3aac1d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines how to react to resources that cannot be loaded.  <a href="#a73520c6f013b0be7c69733d8a3aac1d3">More...</a><br/></td></tr>
<tr class="separator:a73520c6f013b0be7c69733d8a3aac1d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d6493fc7c3e8cbf7d2dcc8c9a0404b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_resource_cache.html#ab3d6493fc7c3e8cbf7d2dcc8c9a0404b">setReleaseStrategy</a> (<a class="el" href="namespacethor_1_1_resources.html#a334125881e68c171d30e1c2467ebe0ea">Resources::ReleaseStrategy</a> strategy)</td></tr>
<tr class="memdesc:ab3d6493fc7c3e8cbf7d2dcc8c9a0404b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether resources are automatically released or not.  <a href="#ab3d6493fc7c3e8cbf7d2dcc8c9a0404b">More...</a><br/></td></tr>
<tr class="separator:ab3d6493fc7c3e8cbf7d2dcc8c9a0404b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class R&gt;<br/>
class thor::ResourceCache&lt; R &gt;</h3>

<p>Class that is responsible for the management of resources like images, fonts or music. </p>
<p>You can acquire and release resources. Access is granted through the key (an ID class). </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">R</td><td>The resource type to manage (for example sf::Texture). Const-correctness is properly forwarded: If <em>Resource</em> is const-qualified, you cannot modify the resources after initialization (via std::shared_ptr). <br/>
 <em>Resource</em> isn't required to be default-constructible or copy-constructible. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2610f7c69982fedd40916c765626f663"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class R&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classthor_1_1_resource_cache.html">thor::ResourceCache</a>&lt; R &gt;::<a class="el" href="classthor_1_1_resource_cache.html">ResourceCache</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<p>Initially, the object owns no allocated resources. By default, the loading failure strategy <a class="el" href="namespacethor_1_1_resources.html#acb865b349dcabe48aca3d79865f60cebadd7a407aa2438f7244c3bbeaabc396d4" title="Throws an exception of type ResourceLoadingException.">Resources::ThrowException</a> and the release strategy <a class="el" href="namespacethor_1_1_resources.html#a334125881e68c171d30e1c2467ebe0eaae9a4ea15383503da1effa2841b2ca05e" title="Unused resources are kept in memory until they are explicitly released or the ResourceCache is destro...">Resources::ExplicitRelease</a> are used. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a5bd443e722dde82b957a279408e94083"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class R&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;R&gt; <a class="el" href="classthor_1_1_resource_cache.html">thor::ResourceCache</a>&lt; R &gt;::acquire </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the resource mapped to <em>key</em>, loading the resource if required. </p>
<p>If the key is already stored, the corresponding resource is returned. Otherwise, the resource is loaded. The release time of the resource is determined by the release strategy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The resource identifier to search for, which also contains loading information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::shared_ptr that allows access to the resource. If the resource allocation fails and the <em>ReturnNullPointer</em> strategy is active, a null pointer is returned. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classthor_1_1_resource_loading_exception.html" title="Exception class for failed resource allocation.">ResourceLoadingException</a></td><td>if the loading of the resource fails (and the <em>ThrowException</em> strategy is active). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classthor_1_1_resource_cache.html#a73520c6f013b0be7c69733d8a3aac1d3" title="Determines how to react to resources that cannot be loaded.">setLoadingFailureStrategy()</a>, <a class="el" href="classthor_1_1_resource_cache.html#ab3d6493fc7c3e8cbf7d2dcc8c9a0404b" title="Determines whether resources are automatically released or not.">setReleaseStrategy()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a289c4037a21ddc5c3f34b47598f9b503"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class R&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classthor_1_1_resource_cache.html">thor::ResourceCache</a>&lt; R &gt;::release </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the resource as soon as possible. </p>
<p>If the resource is not in use (i.e. no std::shared_ptr references it), it is immediately released. Otherwise, it is released as soon as the last std::shared_ptr loses ownership. Calling this function has no effect when the <em>AutoRelease</em> strategy is active, since the resource is released ASAP anyway. </p>
<dl class="section pre"><dt>Precondition</dt><dd><em>key</em> must be a valid resource key (the corresponding resource must be stored inside this cache). To check for available resources, use <a class="el" href="classthor_1_1_resource_cache.html#a3156d9bad6b6da89913dface05c4978c" title="Searches for an occurrence of key and returns the mapped resource, if possible.">search()</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The resource identifier. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true, if the resource was immediately released; false, if it is in use. </dd></dl>

</div>
</div>
<a class="anchor" id="a3156d9bad6b6da89913dface05c4978c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class R&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;R&gt; <a class="el" href="classthor_1_1_resource_cache.html">thor::ResourceCache</a>&lt; R &gt;::search </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches for an occurrence of <em>key</em> and returns the mapped resource, if possible. </p>
<p>This function does never load a new resource. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The resource identifier to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding std::shared_ptr, if found, or <em>nullptr</em> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a8b6c75a551dcc3b8e16ae2f7e2bbdaf2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class R&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;const R&gt; <a class="el" href="classthor_1_1_resource_cache.html">thor::ResourceCache</a>&lt; R &gt;::search </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classthor_1_1_resource_key.html">ResourceKey</a>&lt; R &gt; &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches for an occurrence of <em>key</em> and returns the mapped resource, if possible (const overload). </p>
<p>This function does never load a new resource. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The resource identifier to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding read-only std::shared_ptr, if found, or <em>nullptr</em> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a73520c6f013b0be7c69733d8a3aac1d3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class R&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classthor_1_1_resource_cache.html">thor::ResourceCache</a>&lt; R &gt;::setLoadingFailureStrategy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacethor_1_1_resources.html#acb865b349dcabe48aca3d79865f60ceb">Resources::LoadingFailureStrategy</a>&#160;</td>
          <td class="paramname"><em>strategy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines how to react to resources that cannot be loaded. </p>
<p>The strategy concerns all failing <a class="el" href="classthor_1_1_resource_cache.html#a5bd443e722dde82b957a279408e94083" title="Returns the resource mapped to key, loading the resource if required.">acquire()</a> calls. </p>

</div>
</div>
<a class="anchor" id="ab3d6493fc7c3e8cbf7d2dcc8c9a0404b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class R&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classthor_1_1_resource_cache.html">thor::ResourceCache</a>&lt; R &gt;::setReleaseStrategy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacethor_1_1_resources.html#a334125881e68c171d30e1c2467ebe0ea">Resources::ReleaseStrategy</a>&#160;</td>
          <td class="paramname"><em>strategy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether resources are automatically released or not. </p>
<p>This function sets the strategy for each resource that will be acquired in the future. Resources that have already been allocated are not concerned! This allows you to set the release behaviour specificially for each resource before you call <a class="el" href="classthor_1_1_resource_cache.html#a5bd443e722dde82b957a279408e94083" title="Returns the resource mapped to key, loading the resource if required.">acquire()</a>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Resources/<a class="el" href="_resource_cache_8hpp_source.html">ResourceCache.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 13 2013 16:00:30 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
